tg-lightbox(key="backlog.new-us")
    tg-lightbox-close
    tg-create-us-form([statuses]="statuses|async", (createUs)="createNewUs($event)")

tg-lightbox(key="backlog.new-us-bulk")
    tg-lightbox-close
    tg-bulk-create-lightbox((create)="createUsBulk($event)")

tg-lightbox.lightbox-sprint-add-edit(key="backlog.sprint-add-edit")
    tg-lightbox-close
    tg-sprint-add-edit-lightbox(
        [project]="project|async",
        [editingSprint]="editingSprint|async",
    )

div.wrapper
    tg-project-menu([project]="project|async", active="backlog")

    sidebar.backlog-filter([class.active]="showFilters")
        // tg-filter(
        //     q="ctrl.filterQ"
        //     filters="ctrl.filters"
        //     custom-filters="ctrl.customFilters"
        //     selected-filters="ctrl.selectedFilters"
        //     customFilters="ctl.customFilters"
        //     on-save-custom-filter="ctrl.saveCustomFilter(name)"
        //     on-add-filter="ctrl.addFilter(filter)"
        //     on-select-custom-filter="ctrl.selectCustomFilter(filter)"
        //     on-remove-custom-filter="ctrl.removeCustomFilter(filter)"
        //     on-remove-filter="ctrl.removeFilter(filter)"
        //     on-change-q="ctrl.changeQ(q)"
        // )
        tg-filter(
            [class.open]="filtersOpen",
            section="backlog",
            [appliedFilters]="appliedFilters|async",
            [filters]="filters|async"
        )
    section.main.backlog
        tg-main-title([project]="project | async", [sectionName]="section")

        tg-backlog-summary([project]="project | async", [stats]="stats | async")

        tg-backlog-menu(
            [userstories]="userstories | async",
            [stats]="stats | async",
            [(showFilters)]="showFilters",
            [(showTags)]="showTags",
            [selectedUserstories]="selectedUserstories | async",
            [currentSprint]="currentSprint | async",
            [latestSprint]="latestSprint | async"
        )

        tg-backlog-table(
            [userstories]="userstories | async",
            [showTags]="showTags",
            [project]="project |async",
            [selectedUserstories]="selectedUserstories | async",
            [doomlinePosition]="doomlinePosition | async"
        )

    tg-backlog-sprints.menu-secondary.sidebar(
        [sprints]="sprints | async",
        [project]="project | async",
    )
